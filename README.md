# BarPin MVP

BarPin 是一款“气泡承载”菜单栏工具：它把常用 App 的窗口收进一块紧贴菜单栏的气泡中，让应用看起来像是挂在菜单栏按钮上。点击图标即可唤起并定位窗口；你可以调整窗口大小，它会被记住；再次点击则一键隐藏。

Slogan：把常用 App 固定在菜单栏气泡里。

![BarPin 截图](assets/barpin-screenshot.png)

## 行为概览

- 默认控制系统自带的「日历」App（Calendar）。
- 点击菜单栏图标：显示/定位目标 App 窗口（像气泡一样贴在菜单栏下方）。
- 再次点击：隐藏目标 App。
- 右键菜单可更换 App 或重置窗口大小。

## 首次启动的重要说明（请务必阅读）

由于 BarPin 当前未经过 Apple Developer ID 签名与公证，macOS 可能会在首次打开时提示“已损坏”或“无法验证开发者”。这是系统的正常安全策略，并不代表应用本身存在风险。请按以下方式手动允许运行：

1. 在 Finder 中右键（或按住 Control 点击）`BarPin.app`，选择“打开”。
2. 在弹出的对话框中再次点击“打开”。
3. 如果仍被拦截，请前往“系统设置 > 隐私与安全性”，在“安全性”区域点击“仍要打开”。

完成一次手动允许运行后，后续启动将不再提示。

> 更新提醒：由于当前版本为未签名/未公证应用，每次更新替换 `BarPin.app` 后，系统可能会将其视为“新的应用”，需要重新执行一次“允许运行”和“辅助功能”授权。这是 macOS 的正常安全机制。若辅助功能列表中已存在旧的 BarPin，请先移除旧条目（关闭/删除），再重新添加并勾选。

## 权限要求

首次运行会提示授权辅助功能（Accessibility），请在系统设置里允许：

- 系统设置 > 隐私与安全性 > 辅助功能

这是 BarPin 用于移动/缩放外部应用窗口所必需的权限。

## 运行说明

这是一个 SwiftPM 可执行程序（MVP）。建议在 Xcode 中直接打开目录运行，或使用命令行：

```bash
swift run
```

## 目录结构

- `Package.swift` SwiftPM 配置
- `Sources/BarPin/main.swift` 主要逻辑
